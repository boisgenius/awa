# å¼€å‘è·¯çº¿å›¾

## æ¦‚è¿°

æœ¬æ–‡æ¡£å®šä¹‰äº† Claw Academy é¡¹ç›®çš„å¼€å‘è®¡åˆ’ï¼Œä¸¥æ ¼éµå¾ªæµ‹è¯•é©±åŠ¨å¼€å‘ (TDD) æ¨¡å¼ã€‚

**TDD åŸåˆ™**:
1. **Red**: å…ˆç¼–å†™å¤±è´¥çš„æµ‹è¯•
2. **Green**: ç¼–å†™æœ€å°ä»£ç ä½¿æµ‹è¯•é€šè¿‡
3. **Refactor**: é‡æ„ä»£ç ï¼Œä¿æŒæµ‹è¯•é€šè¿‡

**è‡ªåŠ¨åŒ–æµ‹è¯•ç­–ç•¥**:
- **Watch Mode**: æ–‡ä»¶å˜æ›´æ—¶è‡ªåŠ¨è¿è¡Œç›¸å…³æµ‹è¯•
- **Pre-commit Hook**: æäº¤å‰è‡ªåŠ¨è¿è¡Œæµ‹è¯•ï¼Œå¤±è´¥åˆ™é˜»æ­¢æäº¤
- **CI Pipeline**: PR åˆå¹¶å‰å¿…é¡»é€šè¿‡æ‰€æœ‰æµ‹è¯•
- **è‡ªåŠ¨ä¿®å¤å¾ªç¯**: æµ‹è¯•å¤±è´¥ â†’ åˆ†æé”™è¯¯ â†’ ä¿®å¤ä»£ç  â†’ é‡æ–°æµ‹è¯•

---

## è‡ªåŠ¨åŒ–æµ‹è¯•é…ç½®

### æµ‹è¯•æ¡†æ¶é…ç½®

```typescript
// vitest.config.ts
import { defineConfig } from 'vitest/config';
import react from '@vitejs/plugin-react';
import path from 'path';

export default defineConfig({
  plugins: [react()],
  test: {
    environment: 'jsdom',
    globals: true,
    setupFiles: ['./src/test/setup.ts'],
    include: ['**/*.{test,spec}.{ts,tsx}'],
    coverage: {
      provider: 'v8',
      reporter: ['text', 'json', 'html'],
      exclude: ['node_modules/', 'src/test/'],
      thresholds: {
        statements: 80,
        branches: 80,
        functions: 80,
        lines: 80,
      },
    },
    // ç›‘å¬æ¨¡å¼é…ç½®
    watch: true,
    // å¤±è´¥æ—¶ç«‹å³åœæ­¢
    bail: 1,
    // è¾“å‡ºè¯¦ç»†ä¿¡æ¯
    reporter: ['verbose'],
  },
  resolve: {
    alias: {
      '@': path.resolve(__dirname, './src'),
    },
  },
});
```

### è‡ªåŠ¨æµ‹è¯•è„šæœ¬

```json
// package.json scripts
{
  "scripts": {
    "test": "vitest run",
    "test:watch": "vitest --watch",
    "test:ui": "vitest --ui",
    "test:coverage": "vitest run --coverage",
    "test:e2e": "playwright test",
    "test:e2e:ui": "playwright test --ui",
    "test:all": "pnpm test && pnpm test:e2e",
    "test:fix": "vitest run --reporter=json > test-results.json || node scripts/auto-fix.js"
  }
}
```

### Pre-commit Hook é…ç½®

```javascript
// .husky/pre-commit
#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

# è¿è¡Œ lint-staged
npx lint-staged

# è¿è¡Œç›¸å…³æµ‹è¯•ï¼ˆåªæµ‹è¯•å˜æ›´çš„æ–‡ä»¶ï¼‰
npx vitest related --run
```

```javascript
// lint-staged.config.js
module.exports = {
  '*.{ts,tsx}': [
    'eslint --fix',
    'prettier --write',
    'vitest related --run',
  ],
  '*.{json,md}': ['prettier --write'],
};
```

### è‡ªåŠ¨ä¿®å¤å¾ªç¯è„šæœ¬

```javascript
// scripts/auto-fix.js
/**
 * è‡ªåŠ¨ä¿®å¤å¾ªç¯è„šæœ¬
 * ç”¨æ³•: node scripts/auto-fix.js [maxAttempts]
 *
 * å·¥ä½œæµç¨‹:
 * 1. è¿è¡Œæµ‹è¯•
 * 2. å¦‚æœå¤±è´¥ï¼Œåˆ†æé”™è¯¯è¾“å‡º
 * 3. è°ƒç”¨ Claude Code ä¿®å¤
 * 4. é‡æ–°è¿è¡Œæµ‹è¯•
 * 5. é‡å¤ç›´åˆ°æˆåŠŸæˆ–è¾¾åˆ°æœ€å¤§å°è¯•æ¬¡æ•°
 */
const { execSync, spawn } = require('child_process');
const fs = require('fs');

const MAX_ATTEMPTS = parseInt(process.argv[2]) || 3;
const TEST_RESULTS_FILE = 'test-results.json';

async function runTests() {
  try {
    execSync('pnpm vitest run --reporter=json > test-results.json 2>&1', {
      stdio: 'pipe',
    });
    return { success: true };
  } catch (error) {
    const results = JSON.parse(fs.readFileSync(TEST_RESULTS_FILE, 'utf-8'));
    return { success: false, results };
  }
}

function extractFailures(results) {
  const failures = [];
  for (const file of results.testResults || []) {
    for (const test of file.assertionResults || []) {
      if (test.status === 'failed') {
        failures.push({
          file: file.name,
          test: test.fullName,
          error: test.failureMessages.join('\n'),
        });
      }
    }
  }
  return failures;
}

async function main() {
  console.log('ğŸ§ª å¼€å§‹è‡ªåŠ¨æµ‹è¯•ä¿®å¤å¾ªç¯...\n');

  for (let attempt = 1; attempt <= MAX_ATTEMPTS; attempt++) {
    console.log(`ğŸ“ å°è¯• ${attempt}/${MAX_ATTEMPTS}`);

    const result = await runTests();

    if (result.success) {
      console.log('âœ… æ‰€æœ‰æµ‹è¯•é€šè¿‡ï¼');
      process.exit(0);
    }

    const failures = extractFailures(result.results);
    console.log(`âŒ ${failures.length} ä¸ªæµ‹è¯•å¤±è´¥\n`);

    // è¾“å‡ºå¤±è´¥ä¿¡æ¯ä¾› Claude Code åˆ†æ
    for (const failure of failures) {
      console.log(`--- å¤±è´¥: ${failure.test} ---`);
      console.log(`æ–‡ä»¶: ${failure.file}`);
      console.log(`é”™è¯¯: ${failure.error}\n`);
    }

    if (attempt < MAX_ATTEMPTS) {
      console.log('â³ ç­‰å¾…ä¿®å¤åé‡æ–°æµ‹è¯•...\n');
      // è¿™é‡Œå¯ä»¥é›†æˆ Claude Code API è‡ªåŠ¨ä¿®å¤
      // æˆ–è€…ç­‰å¾…å¼€å‘è€…æ‰‹åŠ¨ä¿®å¤
      await new Promise(r => setTimeout(r, 2000));
    }
  }

  console.log('âŒ è¾¾åˆ°æœ€å¤§å°è¯•æ¬¡æ•°ï¼Œè¯·æ‰‹åŠ¨ä¿®å¤');
  process.exit(1);
}

main();
```

---

## TDD å¼€å‘å·¥ä½œæµ

### Claude Code è‡ªåŠ¨ä¿®å¤æµç¨‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     TDD è‡ªåŠ¨åŒ–å¼€å‘æµç¨‹                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                      â”‚
â”‚  1. ç¼–å†™æµ‹è¯• (Red)                                                   â”‚
â”‚     â””â”€â†’ Claude Code: "ä¸º Button ç»„ä»¶ç¼–å†™æµ‹è¯•ç”¨ä¾‹"                     â”‚
â”‚                                                                      â”‚
â”‚  2. è¿è¡Œæµ‹è¯• (è‡ªåŠ¨)                                                   â”‚
â”‚     â””â”€â†’ pnpm test:watch                                              â”‚
â”‚         â”œâ”€â†’ âœ… é€šè¿‡ â†’ ç»§ç»­ä¸‹ä¸€ä¸ªåŠŸèƒ½                                  â”‚
â”‚         â””â”€â†’ âŒ å¤±è´¥ â†’ è¿›å…¥ä¿®å¤å¾ªç¯                                    â”‚
â”‚                                                                      â”‚
â”‚  3. è‡ªåŠ¨ä¿®å¤å¾ªç¯                                                      â”‚
â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
â”‚     â”‚  a. åˆ†ææµ‹è¯•å¤±è´¥åŸå›                               â”‚              â”‚
â”‚     â”‚  b. Claude Code è‡ªåŠ¨ç”Ÿæˆä¿®å¤ä»£ç                   â”‚              â”‚
â”‚     â”‚  c. åº”ç”¨ä¿®å¤                                     â”‚              â”‚
â”‚     â”‚  d. é‡æ–°è¿è¡Œæµ‹è¯•                                 â”‚              â”‚
â”‚     â”‚  e. å¤±è´¥åˆ™é‡å¤ (æœ€å¤š N æ¬¡)                        â”‚              â”‚
â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
â”‚                                                                      â”‚
â”‚  4. ä»£ç æäº¤                                                         â”‚
â”‚     â””â”€â†’ git commit                                                   â”‚
â”‚         â””â”€â†’ pre-commit hook è‡ªåŠ¨è¿è¡Œæµ‹è¯•                              â”‚
â”‚             â”œâ”€â†’ âœ… é€šè¿‡ â†’ æäº¤æˆåŠŸ                                    â”‚
â”‚             â””â”€â†’ âŒ å¤±è´¥ â†’ é˜»æ­¢æäº¤ï¼Œè¿”å›æ­¥éª¤ 3                         â”‚
â”‚                                                                      â”‚
â”‚  5. PR åˆå¹¶                                                          â”‚
â”‚     â””â”€â†’ GitHub Actions CI                                            â”‚
â”‚         â””â”€â†’ å…¨é‡æµ‹è¯• + è¦†ç›–ç‡æ£€æŸ¥                                     â”‚
â”‚             â”œâ”€â†’ âœ… é€šè¿‡ â†’ å…è®¸åˆå¹¶                                    â”‚
â”‚             â””â”€â†’ âŒ å¤±è´¥ â†’ é˜»æ­¢åˆå¹¶                                    â”‚
â”‚                                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Claude Code TDD æç¤ºè¯æ¨¡æ¿

**Step 1: ç¼–å†™æµ‹è¯•**
```
è¯·ä¸º [ç»„ä»¶å] ç¼–å†™å®Œæ•´çš„æµ‹è¯•ç”¨ä¾‹ã€‚

è¦æ±‚:
- ä½¿ç”¨ Vitest + React Testing Library
- è¦†ç›–æ‰€æœ‰ props å’ŒçŠ¶æ€
- è¦†ç›–ç”¨æˆ·äº¤äº’
- è¦†ç›–è¾¹ç•Œæƒ…å†µ

å‚è€ƒè®¾è®¡: prototype/ui/claw-academy.html ä¸­çš„ [classå]
```

**Step 2: è¿è¡Œæµ‹è¯•å¹¶ä¿®å¤**
```
æµ‹è¯•å¤±è´¥ï¼Œè¯·åˆ†æå¹¶ä¿®å¤ï¼š

å¤±è´¥æµ‹è¯•: [æµ‹è¯•åç§°]
é”™è¯¯ä¿¡æ¯: [é”™è¯¯å†…å®¹]
ç›¸å…³æ–‡ä»¶: [æ–‡ä»¶è·¯å¾„]

è¦æ±‚:
- åˆ†æå¤±è´¥åŸå› 
- ä¿®å¤ä»£ç ä½¿æµ‹è¯•é€šè¿‡
- ä¸è¦ä¿®æ”¹æµ‹è¯•ç”¨ä¾‹ï¼ˆé™¤éæµ‹è¯•æœ¬èº«æœ‰é—®é¢˜ï¼‰
```

**Step 3: é‡æ„**
```
æµ‹è¯•å·²é€šè¿‡ï¼Œè¯·é‡æ„ä»£ç ï¼š

æ–‡ä»¶: [æ–‡ä»¶è·¯å¾„]

è¦æ±‚:
- ä¿æŒæµ‹è¯•é€šè¿‡
- æå–é‡å¤ä»£ç 
- ä¼˜åŒ–æ€§èƒ½
- æ”¹å–„å¯è¯»æ€§
```

---

## Phase 0: é¡¹ç›®åˆå§‹åŒ–

### 0.1 ç¯å¢ƒæ­å»º
**é¢„è®¡æ—¶é—´**: 1.5 å¤©

- [ ] åˆå§‹åŒ– Next.js 14 é¡¹ç›® (App Router)
- [ ] é…ç½® TypeScript
- [ ] é…ç½® Tailwind CSS
- [ ] é…ç½® ESLint + Prettier
- [ ] é…ç½® Vitest æµ‹è¯•æ¡†æ¶ï¼ˆå« watch modeï¼‰
- [ ] é…ç½® Playwright E2E æµ‹è¯•
- [ ] é…ç½® Husky + lint-stagedï¼ˆpre-commit è‡ªåŠ¨æµ‹è¯•ï¼‰
- [ ] åˆ›å»ºè‡ªåŠ¨ä¿®å¤è„šæœ¬ (`scripts/auto-fix.js`)
- [ ] åˆ›å»ºç›®å½•ç»“æ„

**TDD è‡ªåŠ¨åŒ–é…ç½®æ¸…å•**:
- [ ] `vitest.config.ts` - æµ‹è¯•æ¡†æ¶é…ç½®ï¼ˆcoverage é˜ˆå€¼ 80%ï¼‰
- [ ] `.husky/pre-commit` - æäº¤å‰è‡ªåŠ¨è¿è¡Œæµ‹è¯•
- [ ] `lint-staged.config.js` - åªæµ‹è¯•å˜æ›´æ–‡ä»¶
- [ ] `scripts/auto-fix.js` - è‡ªåŠ¨ä¿®å¤å¾ªç¯è„šæœ¬
- [ ] `src/test/setup.ts` - æµ‹è¯•ç¯å¢ƒåˆå§‹åŒ–

**éªŒæ”¶æ ‡å‡†**:
```bash
pnpm test           # æµ‹è¯•æ¡†æ¶è¿è¡Œæ­£å¸¸
pnpm test:watch     # ç›‘å¬æ¨¡å¼æ­£å¸¸ï¼ˆæ–‡ä»¶å˜æ›´è‡ªåŠ¨æµ‹è¯•ï¼‰
pnpm test:coverage  # è¦†ç›–ç‡æŠ¥å‘Šç”Ÿæˆæ­£å¸¸
pnpm test:e2e       # E2E æµ‹è¯•æ¡†æ¶è¿è¡Œæ­£å¸¸
pnpm lint           # ä»£ç æ£€æŸ¥é€šè¿‡
pnpm build          # æ„å»ºæˆåŠŸ

# éªŒè¯ pre-commit hook
git commit --allow-empty -m "test hook"  # åº”è§¦å‘æµ‹è¯•
```

### 0.2 è®¾è®¡ç³»ç»ŸåŸºç¡€
**é¢„è®¡æ—¶é—´**: 1 å¤©

- [ ] é…ç½® CSS å˜é‡ (design-tokens.css)
- [ ] é…ç½® Tailwind è‡ªå®šä¹‰ä¸»é¢˜
- [ ] æ·»åŠ  Google Fonts (Inter, JetBrains Mono)
- [ ] åˆ›å»º cn() å·¥å…·å‡½æ•°

**æµ‹è¯•æ¸…å•**:
- [ ] `cn.test.ts` - className åˆå¹¶å‡½æ•°æµ‹è¯•

---

## Phase 1: åŸºç¡€ UI ç»„ä»¶

> **UI è®¾è®¡å‚è€ƒ**: `prototype/ui/claw-academy.html`
>
> æ‰€æœ‰ç»„ä»¶å¼€å‘å¿…é¡»å‚è€ƒåŸå‹æ–‡ä»¶ä¸­çš„è®¾è®¡å®ç°ã€‚å¯¹äºåŸå‹ä¸­æœªåŒ…å«çš„ç»„ä»¶ï¼ˆå¦‚æ¶ˆæ¯æé†’ã€å¼¹çª—ã€Tooltip ç­‰ï¼‰ï¼Œå¯è‡ªè¡Œè®¾è®¡æˆ–ä½¿ç”¨ç¬¬ä¸‰æ–¹ç»„ä»¶åº“ï¼Œä½†å¿…é¡»éµå¾ªä¸»é¢˜é£æ ¼ï¼ˆé¢œè‰²ã€å­—ä½“ã€é—´è·ã€åŠ¨ç”»ç­‰ï¼‰ã€‚

### 1.1 Button ç»„ä»¶
**é¢„è®¡æ—¶é—´**: 0.5 å¤©

**TDD æ­¥éª¤**:
1. ç¼–å†™æµ‹è¯• `button.test.tsx` â†’ è¿è¡Œæµ‹è¯• â†’ âŒ å¤±è´¥ (Red)
2. å®ç°ç»„ä»¶ `button.tsx` â†’ è¿è¡Œæµ‹è¯• â†’ âœ… é€šè¿‡ (Green)
3. é‡æ„å’Œå®Œå–„ â†’ è¿è¡Œæµ‹è¯• â†’ âœ… ä¿æŒé€šè¿‡ (Refactor)

**å®Œæ•´æµ‹è¯•ç”¨ä¾‹**:
```typescript
// src/components/ui/button/button.test.tsx
import { render, screen, fireEvent } from '@testing-library/react';
import { describe, it, expect, vi } from 'vitest';
import { Button } from './button';

describe('Button', () => {
  // åŸºç¡€æ¸²æŸ“
  it('renders children correctly', () => {
    render(<Button>Click me</Button>);
    expect(screen.getByRole('button')).toHaveTextContent('Click me');
  });

  // å˜ä½“æ ·å¼
  describe('variants', () => {
    it('applies primary variant styles (default)', () => {
      render(<Button variant="primary">Primary</Button>);
      const btn = screen.getByRole('button');
      expect(btn).toHaveClass('bg-crimson');
    });

    it('applies secondary variant styles', () => {
      render(<Button variant="secondary">Secondary</Button>);
      const btn = screen.getByRole('button');
      expect(btn).toHaveClass('border-dashed');
    });

    it('applies ghost variant styles', () => {
      render(<Button variant="ghost">Ghost</Button>);
      const btn = screen.getByRole('button');
      expect(btn).toHaveClass('border-solid');
    });
  });

  // å°ºå¯¸
  describe('sizes', () => {
    it('applies sm size', () => {
      render(<Button size="sm">Small</Button>);
      expect(screen.getByRole('button')).toHaveClass('px-3', 'py-2');
    });

    it('applies md size (default)', () => {
      render(<Button size="md">Medium</Button>);
      expect(screen.getByRole('button')).toHaveClass('px-5', 'py-3');
    });

    it('applies lg size', () => {
      render(<Button size="lg">Large</Button>);
      expect(screen.getByRole('button')).toHaveClass('px-6', 'py-4');
    });
  });

  // çŠ¶æ€
  it('handles disabled state', () => {
    render(<Button disabled>Disabled</Button>);
    expect(screen.getByRole('button')).toBeDisabled();
    expect(screen.getByRole('button')).toHaveClass('opacity-50');
  });

  it('handles loading state', () => {
    render(<Button loading>Loading</Button>);
    expect(screen.getByRole('button')).toBeDisabled();
    expect(screen.getByTestId('spinner')).toBeInTheDocument();
  });

  // äº¤äº’
  it('calls onClick handler', () => {
    const handleClick = vi.fn();
    render(<Button onClick={handleClick}>Click</Button>);
    fireEvent.click(screen.getByRole('button'));
    expect(handleClick).toHaveBeenCalledTimes(1);
  });

  it('does not call onClick when disabled', () => {
    const handleClick = vi.fn();
    render(<Button disabled onClick={handleClick}>Click</Button>);
    fireEvent.click(screen.getByRole('button'));
    expect(handleClick).not.toHaveBeenCalled();
  });
});
```

**å˜ä½“** (å‚è€ƒåŸå‹ class):
- Primary `.connect-btn` (crimson èƒŒæ™¯ï¼Œhover å‘å…‰)
- Secondary `.btn-human` (é€æ˜ + è™šçº¿è¾¹æ¡†)
- Ghost `.btn-agent` (é€æ˜ + å®çº¿è¾¹æ¡†)

**è‡ªåŠ¨æµ‹è¯•å‘½ä»¤**:
```bash
# å¼€å‘æ—¶è¿è¡Œï¼ˆè‡ªåŠ¨ç›‘å¬ï¼‰
pnpm test:watch button

# æµ‹è¯•å¤±è´¥æ—¶ï¼ŒClaude Code ä¼šè‡ªåŠ¨åˆ†æå¹¶ä¿®å¤
```

### 1.2 Badge ç»„ä»¶
**é¢„è®¡æ—¶é—´**: 0.5 å¤©

**æµ‹è¯•ç”¨ä¾‹**:
```typescript
describe('Badge', () => {
  it('renders text correctly');
  it('applies variant styles (live, dev, high, medium, emerging)');
});
```

**å˜ä½“** (å‚è€ƒåŸå‹ class):
- `.badge-live` (ç»¿è‰²è¾¹æ¡†å’Œæ–‡å­—)
- `.badge-dev` (é»„è‰²è¾¹æ¡†å’Œæ–‡å­—)
- `.badge-high` (crimson è¾¹æ¡†)
- `.badge-medium` (é»„è‰²è¾¹æ¡†)
- `.badge-emerging` (ç´«è‰²è¾¹æ¡†)

### 1.3 Card ç»„ä»¶
**é¢„è®¡æ—¶é—´**: 0.5 å¤©

> å‚è€ƒåŸå‹ `.skill-card`, `.onboard-card` æ ·å¼

**æµ‹è¯•ç”¨ä¾‹**:
```typescript
describe('Card', () => {
  it('renders children correctly');
  it('applies hover effect styles');  // ä¸Šæµ® + å‘å…‰è¾¹æ¡†
  it('handles click event');
});
```

### 1.4 Input ç»„ä»¶
**é¢„è®¡æ—¶é—´**: 0.5 å¤©

> å‚è€ƒåŸå‹ `.search-box input` æ ·å¼

**æµ‹è¯•ç”¨ä¾‹**:
```typescript
describe('Input', () => {
  it('renders with placeholder');
  it('handles value changes');
  it('displays keyboard shortcut hint');  // å‚è€ƒ .kbd
  it('applies focus styles');             // crimson è¾¹æ¡† + glow
});
```

### 1.5 Pill (Filter) ç»„ä»¶
**é¢„è®¡æ—¶é—´**: 0.5 å¤©

> å‚è€ƒåŸå‹ `.filter-pill`, `.time-pill` æ ·å¼

**æµ‹è¯•ç”¨ä¾‹**:
```typescript
describe('Pill', () => {
  it('renders label and count');
  it('applies active state');   // å¡«å…… crimson
  it('handles click event');
});
```

### 1.6 IconButton ç»„ä»¶
**é¢„è®¡æ—¶é—´**: 0.25 å¤©

> å‚è€ƒåŸå‹ `.icon-btn` æ ·å¼

**æµ‹è¯•ç”¨ä¾‹**:
```typescript
describe('IconButton', () => {
  it('renders icon');
  it('applies starred state');  // é»„è‰² (accent-warning)
  it('handles click event');
});
```

### 1.7 Select ç»„ä»¶
**é¢„è®¡æ—¶é—´**: 0.5 å¤©

> å‚è€ƒåŸå‹ `.sort-select` æ ·å¼

**æµ‹è¯•ç”¨ä¾‹**:
```typescript
describe('Select', () => {
  it('renders options');
  it('displays selected value');
  it('handles selection change');
});
```

### 1.8 æ‰©å±•ç»„ä»¶ (æŒ‰éœ€å¼€å‘)
**é¢„è®¡æ—¶é—´**: 1 å¤©

ä»¥ä¸‹ç»„ä»¶åŸå‹ä¸­æœªåŒ…å«ï¼Œå¯è‡ªè¡Œè®¾è®¡æˆ–ä½¿ç”¨ç¬¬ä¸‰æ–¹ç»„ä»¶åº“ï¼ˆRadix UI / Headless UIï¼‰ï¼Œä½†éœ€éµå¾ªä¸»é¢˜é£æ ¼ï¼š

| ç»„ä»¶ | ç”¨é€” | è®¾è®¡è¦ç‚¹ |
|------|------|----------|
| Dialog/Modal | å¼¹çª—ã€ç¡®è®¤æ¡† | èƒŒæ™¯ `bg-card`ï¼Œè¾¹æ¡† `border-color`ï¼Œåœ†è§’ `radius-lg` |
| Toast | æ¶ˆæ¯æé†’ | ä½¿ç”¨çŠ¶æ€è‰²è¾¹æ¡†ï¼ˆsuccess/error/warningï¼‰ |
| Tooltip | å·¥å…·æç¤º | èƒŒæ™¯ `bg-tertiary`ï¼Œå°åœ†è§’ |
| Dropdown | ä¸‹æ‹‰èœå• | å‚è€ƒ `.sort-select` æ ·å¼ |
| Loading | åŠ è½½çŠ¶æ€ | crimson ä¸»è‰² spinner |

---

## Phase 2: å¸ƒå±€ç»„ä»¶

### 2.1 Sidebar ç»„ä»¶
**é¢„è®¡æ—¶é—´**: 1 å¤©

> å‚è€ƒåŸå‹ `.sidebar` åŠç›¸å…³å­ç»„ä»¶æ ·å¼

**æµ‹è¯•ç”¨ä¾‹**:
```typescript
describe('Sidebar', () => {
  it('renders navigation sections');           // .nav-section, .nav-section-title
  it('highlights active item');                // .nav-item.active (å·¦ä¾§çº¢æ¡)
  it('handles collapse/expand on mobile');     // .sidebar.hidden
  it('renders token widget');                  // .token-widget
});
```

**å­ç»„ä»¶**:
- NavSection (`.nav-section`)
- NavItem (`.nav-item`, `.nav-item-icon`, `.nav-item-count`)
- TokenWidget (`.token-widget`, `.token-price`, `.token-stats`)

### 2.2 Header ç»„ä»¶
**é¢„è®¡æ—¶é—´**: 0.5 å¤©

> å‚è€ƒåŸå‹ `.top-nav` åŠç›¸å…³å­ç»„ä»¶æ ·å¼

**æµ‹è¯•ç”¨ä¾‹**:
```typescript
describe('Header', () => {
  it('renders navigation tabs');    // .nav-tabs, .nav-tab
  it('highlights active tab');      // .nav-tab.active (ä¸‹åˆ’çº¿)
  it('renders search box');         // .search-box, .kbd
  it('renders connect button');     // .connect-btn
});
```

### 2.3 Footer ç»„ä»¶
**é¢„è®¡æ—¶é—´**: 0.25 å¤©

**æµ‹è¯•ç”¨ä¾‹**:
```typescript
describe('Footer', () => {
  it('renders links');
  it('renders copyright text');
});
```

### 2.4 AnnouncementBar ç»„ä»¶
**é¢„è®¡æ—¶é—´**: 0.25 å¤©

**æµ‹è¯•ç”¨ä¾‹**:
```typescript
describe('AnnouncementBar', () => {
  it('renders announcement message');
  it('renders link');
});
```

---

## Phase 3: åŠŸèƒ½ç»„ä»¶

### 3.1 SkillCard ç»„ä»¶
**é¢„è®¡æ—¶é—´**: 1 å¤©

> å‚è€ƒåŸå‹ `.skill-card` åŠç›¸å…³å­ç»„ä»¶æ ·å¼

**æµ‹è¯•ç”¨ä¾‹**:
```typescript
describe('SkillCard', () => {
  it('renders skill information');
  it('displays verified badge when verified');  // .verified-badge
  it('renders status and priority badges');     // .badge-live, .badge-high ç­‰
  it('renders feature tags');                   // .feature-tag
  it('displays rating and downloads');          // .skill-stats
  it('displays price');                         // .skill-price (crimson)
  it('handles star button click');              // .icon-btn.starred
  it('applies hover effect');                   // translateY(-4px) + glow
});
```

### 3.2 SkillGrid ç»„ä»¶
**é¢„è®¡æ—¶é—´**: 0.5 å¤©

**æµ‹è¯•ç”¨ä¾‹**:
```typescript
describe('SkillGrid', () => {
  it('renders list of skill cards');
  it('displays empty state when no skills');
  it('displays loading skeleton');
});
```

### 3.3 StatsBar ç»„ä»¶
**é¢„è®¡æ—¶é—´**: 0.5 å¤©

**æµ‹è¯•ç”¨ä¾‹**:
```typescript
describe('StatsBar', () => {
  it('renders stat items');
  it('displays positive change in green');
  it('displays negative change in red');
});
```

### 3.4 FilterBar ç»„ä»¶
**é¢„è®¡æ—¶é—´**: 0.5 å¤©

**æµ‹è¯•ç”¨ä¾‹**:
```typescript
describe('FilterBar', () => {
  it('renders category pills');
  it('handles category selection');
  it('renders sort select');
  it('handles sort change');
});
```

### 3.5 LeaderboardTable ç»„ä»¶
**é¢„è®¡æ—¶é—´**: 1 å¤©

> å‚è€ƒåŸå‹ `.table-container`, `.data-table` åŠç›¸å…³æ ·å¼

**æµ‹è¯•ç”¨ä¾‹**:
```typescript
describe('LeaderboardTable', () => {
  it('renders table headers');                  // .data-table th
  it('renders skill rows');                     // .skill-cell, .mini-icon
  it('displays positive change in green');      // .td-change.positive (accent-secondary)
  it('displays negative change in red');        // .td-change.negative (accent-danger)
  it('handles column sorting');                 // th.sortable
  it('handles time range change');              // .time-pill
});
```

### 3.6 SearchBox ç»„ä»¶
**é¢„è®¡æ—¶é—´**: 0.5 å¤©

**æµ‹è¯•ç”¨ä¾‹**:
```typescript
describe('SearchBox', () => {
  it('renders input with placeholder');
  it('handles input change');
  it('focuses on keyboard shortcut (Cmd+K)');
  it('debounces input');
});
```

### 3.7 AgentStatus ç»„ä»¶
**é¢„è®¡æ—¶é—´**: 0.5 å¤©

**æµ‹è¯•ç”¨ä¾‹**:
```typescript
describe('AgentStatus', () => {
  it('displays agent name');
  it('displays wallet balance');
  it('displays online status');
});
```

**è¯´æ˜**: æ— éœ€ç”¨æˆ·æ‰‹åŠ¨è¿æ¥é’±åŒ…ï¼ŒAgent ä½¿ç”¨ç»‘å®šé’±åŒ…è‡ªåŠ¨æ”¯ä»˜ã€‚

### 3.8 HeroSection ç»„ä»¶
**é¢„è®¡æ—¶é—´**: 0.5 å¤©

**æµ‹è¯•ç”¨ä¾‹**:
```typescript
describe('HeroSection', () => {
  it('renders title and description');
  it('renders CTA buttons');
  it('renders onboard card');
  it('handles tab switching in onboard card');
});
```

---

## Phase 4: çŠ¶æ€ç®¡ç†å’Œ Hooks

### 4.1 Filter Store
**é¢„è®¡æ—¶é—´**: 0.5 å¤©

**æµ‹è¯•ç”¨ä¾‹**:
```typescript
describe('useFilterStore', () => {
  it('initializes with default values');
  it('updates category');
  it('updates sort option');
  it('updates search query');
  it('toggles verified only');
  it('resets to defaults');
});
```

### 4.2 UI Store
**é¢„è®¡æ—¶é—´**: 0.25 å¤©

**æµ‹è¯•ç”¨ä¾‹**:
```typescript
describe('useUIStore', () => {
  it('manages sidebar visibility');
  it('manages search focus');
});
```

### 4.3 useSkills Hook
**é¢„è®¡æ—¶é—´**: 0.5 å¤©

**æµ‹è¯•ç”¨ä¾‹**:
```typescript
describe('useSkills', () => {
  it('fetches skills with filters');
  it('returns loading state');
  it('returns error state');
  it('caches results');
});
```

### 4.4 useSearch Hook
**é¢„è®¡æ—¶é—´**: 0.5 å¤©

**æµ‹è¯•ç”¨ä¾‹**:
```typescript
describe('useSearch', () => {
  it('filters skills by query');
  it('debounces search input');
  it('clears search');
});
```

---

## Phase 5: é¡µé¢ç»„è£…

### 5.1 é¦–é¡µ (/)
**é¢„è®¡æ—¶é—´**: 1 å¤©

**E2E æµ‹è¯•**:
```typescript
test('home page', async ({ page }) => {
  await page.goto('/');
  await expect(page.getByText('A Learning Academy for AI Agents')).toBeVisible();
  await expect(page.getByRole('button', { name: "I'm a Human" })).toBeVisible();
  await expect(page.getByRole('button', { name: "I'm an Agent" })).toBeVisible();
});

test('navigation to marketplace', async ({ page }) => {
  await page.goto('/');
  await page.click("text=I'm a Human");
  await expect(page).toHaveURL('/#marketplace');
});
```

### 5.2 å¸‚åœºé¡µé¢é›†æˆ
**é¢„è®¡æ—¶é—´**: 1 å¤©

**E2E æµ‹è¯•**:
```typescript
test('marketplace', async ({ page }) => {
  await page.goto('/#marketplace');
  await expect(page.getByText('Total Skills')).toBeVisible();
  await expect(page.locator('.skill-card')).toHaveCount.greaterThan(0);
});

test('filter by category', async ({ page }) => {
  await page.goto('/#marketplace');
  await page.click('text=Coding');
  // Verify filtered results
});

test('search skills', async ({ page }) => {
  await page.goto('/#marketplace');
  await page.fill('[placeholder="Search skills..."]', 'trading');
  // Verify search results
});
```

### 5.3 æ’è¡Œæ¦œé›†æˆ
**é¢„è®¡æ—¶é—´**: 0.5 å¤©

**E2E æµ‹è¯•**:
```typescript
test('leaderboard', async ({ page }) => {
  await page.goto('/#leaderboard');
  await expect(page.getByText('Top Performers')).toBeVisible();
  await expect(page.locator('table tbody tr')).toHaveCount.greaterThan(0);
});

test('change time range', async ({ page }) => {
  await page.goto('/#leaderboard');
  await page.click('text=7D');
  // Verify data updated
});
```

---

## Phase 6: API é›†æˆ

### 6.1 Skills API
**é¢„è®¡æ—¶é—´**: 1 å¤©

**æµ‹è¯•ç”¨ä¾‹**:
```typescript
describe('GET /api/skills', () => {
  it('returns paginated skills');
  it('filters by category');
  it('sorts by specified field');
  it('searches by query');
});

describe('GET /api/skills/:id', () => {
  it('returns skill details');
  it('returns 404 for non-existent skill');
});
```

### 6.2 Leaderboard API
**é¢„è®¡æ—¶é—´**: 0.5 å¤©

**æµ‹è¯•ç”¨ä¾‹**:
```typescript
describe('GET /api/leaderboard', () => {
  it('returns ranked skills');
  it('filters by time range');
});
```

### 6.3 Users API
**é¢„è®¡æ—¶é—´**: 0.5 å¤©

**æµ‹è¯•ç”¨ä¾‹**:
```typescript
describe('GET /api/users/:address', () => {
  it('returns user profile');
  it('creates user if not exists');
});

describe('POST /api/users/:address/save', () => {
  it('adds skill to saved list');
  it('removes skill from saved list');
});
```

---

## Phase 7: Agent é›†æˆ

### 7.1 Agent API Key è®¤è¯
**é¢„è®¡æ—¶é—´**: 1 å¤©

- [ ] å®ç° API Key éªŒè¯ä¸­é—´ä»¶
- [ ] å®ç° Agent æ³¨å†Œ/è®¤é¢†æµç¨‹
- [ ] å®ç°è‡ªåŠ¨æ”¯ä»˜é€»è¾‘

**æµ‹è¯•ç”¨ä¾‹**:
```typescript
describe('Agent Integration', () => {
  it('validates API key');
  it('registers new agent');
  it('processes auto payment');
  it('returns skill content after purchase');
});
```

**è¯´æ˜**: æ— éœ€ç”¨æˆ·æ‰‹åŠ¨è¿æ¥é’±åŒ…ï¼ŒAgent ä½¿ç”¨ç»‘å®šé’±åŒ…è‡ªåŠ¨æ”¯ä»˜ã€‚

---

## Phase 8: ä¼˜åŒ–å’Œéƒ¨ç½²

### 8.1 æ€§èƒ½ä¼˜åŒ–
**é¢„è®¡æ—¶é—´**: 1 å¤©

- [ ] å›¾ç‰‡ä¼˜åŒ– (next/image)
- [ ] ä»£ç åˆ†å‰²
- [ ] éª¨æ¶å±åŠ è½½
- [ ] ç¼“å­˜ç­–ç•¥

### 8.2 SEO ä¼˜åŒ–
**é¢„è®¡æ—¶é—´**: 0.5 å¤©

- [ ] å…ƒæ•°æ®é…ç½®
- [ ] Open Graph æ ‡ç­¾
- [ ] Sitemap ç”Ÿæˆ

### 8.3 éƒ¨ç½²é…ç½®
**é¢„è®¡æ—¶é—´**: 0.5 å¤©

- [ ] Vercel éƒ¨ç½²é…ç½®
- [ ] ç¯å¢ƒå˜é‡é…ç½®
- [ ] CI/CD æµæ°´çº¿

---

## æ—¶é—´çº¿æ€»è§ˆ

| Phase | å†…å®¹ | é¢„è®¡æ—¶é—´ |
|-------|------|----------|
| Phase 0 | é¡¹ç›®åˆå§‹åŒ– + TDD è‡ªåŠ¨åŒ–é…ç½® | 2.5 å¤© |
| Phase 1 | åŸºç¡€ UI ç»„ä»¶ (TDD) | 4 å¤© |
| Phase 2 | å¸ƒå±€ç»„ä»¶ (TDD) | 2 å¤© |
| Phase 3 | åŠŸèƒ½ç»„ä»¶ (TDD) | 5.5 å¤© |
| Phase 4 | çŠ¶æ€ç®¡ç†å’Œ Hooks (TDD) | 1.75 å¤© |
| Phase 5 | é¡µé¢ç»„è£… + E2E æµ‹è¯• | 2.5 å¤© |
| Phase 6 | API é›†æˆ + é›†æˆæµ‹è¯• | 2 å¤© |
| Phase 7 | Agent é›†æˆ | 1 å¤© |
| Phase 8 | ä¼˜åŒ–å’Œéƒ¨ç½² | 2 å¤© |
| **æ€»è®¡** | | **~23.25 å¤©** |

> **æ³¨**: æ¯ä¸ª Phase éƒ½ä¸¥æ ¼éµå¾ª TDD (Red-Green-Refactor)ã€‚è‡ªåŠ¨åŒ–æµ‹è¯•é…ç½®åï¼Œå¤±è´¥æµ‹è¯•ä¼šè‡ªåŠ¨è§¦å‘ä¿®å¤å¾ªç¯ã€‚

---

## é‡Œç¨‹ç¢‘

### M1: é™æ€åŸå‹ (Phase 0-3)
- å®Œæˆæ‰€æœ‰ UI ç»„ä»¶
- ä½¿ç”¨ mock æ•°æ®å±•ç¤ºé¡µé¢
- å¯æ¼”ç¤ºå®Œæ•´ UI

### M2: åŠŸèƒ½å®Œæ•´ (Phase 4-6)
- å®ŒæˆçŠ¶æ€ç®¡ç†
- API é›†æˆ
- æœç´¢ã€ç­›é€‰ã€æ’åºåŠŸèƒ½

### M3: Agent é›†æˆ (Phase 7)
- Agent API Key è®¤è¯
- è‡ªåŠ¨æ”¯ä»˜
- æŠ€èƒ½è´­ä¹°æµç¨‹

### M4: ç”Ÿäº§å°±ç»ª (Phase 8)
- æ€§èƒ½ä¼˜åŒ–
- éƒ¨ç½²ä¸Šçº¿
- ç›‘æ§é…ç½®

---

## é£é™©å’Œç¼“è§£

| é£é™© | å½±å“ | ç¼“è§£æªæ–½ |
|------|------|----------|
| Solana é’±åŒ…å…¼å®¹æ€§é—®é¢˜ | é«˜ | æå‰æµ‹è¯•ä¸»æµé’±åŒ… |
| API æ€§èƒ½é—®é¢˜ | ä¸­ | å®æ–½ç¼“å­˜ç­–ç•¥ |
| ç§»åŠ¨ç«¯é€‚é… | ä¸­ | ä¼˜å…ˆå¼€å‘å“åº”å¼å¸ƒå±€ |
| æµ‹è¯•è¦†ç›–ä¸è¶³ | é«˜ | ä¸¥æ ¼éµå¾ª TDD æµç¨‹ |

---

## æµ‹è¯•è¦†ç›–ç‡ç›®æ ‡

| é˜¶æ®µ | å•å…ƒæµ‹è¯• | é›†æˆæµ‹è¯• | E2E æµ‹è¯• |
|------|----------|----------|----------|
| M1 | 80% | - | - |
| M2 | 80% | 70% | 50% |
| M3 | 80% | 75% | 70% |
| M4 | 85% | 80% | 80% |
